package main

// 1. Selections from auth_item, auth_item_child. In php implementation there is projectId condition. Is it actual now?
// 2. All rules (php serialized to json format map)
// 		Here add json format in new table field as a serialized:
// 		- News_Permission_Manager::assign,
// 		- News_Permission_Manager::saveAssignment,
// 		- News_Permission_Manager::createItem,
// 		- News_Permission_Manager::saveItem.
// 3. May be there is no reason to do bulk check instead of sync checking.
// 		Execute bulk checking for user with several actions for checking.
// 4. Don`t have to make an async checking. Only for several users (unlikely case).
// 		Check implementing time for both.
// 5. Check, what kind of data, may be serialized string with parameters.
// 6. May be don`t have to use differrent logic for all types (boolean, integer, string, etc)

// 7. Remove mutexes https://godoc.org/golang.org/x/sync/syncmap
// 8. Remove global var
/*


test it (multiple request):
[{"UserID":133543648,"action":"ncc.regionId.access","params":[{"regionId":"54"},{"regionId":"24"},{"regionId":"55"},{"regionId":"22"},{"regionId":"42"},{"regionId":"70"},{"regionId":"38"},{"regionId":"123"},{"regionId":"43403"},{"regionId":"1077"},{"regionId":"181490"},{"regionId":"52"},{"regionId":"45"},{"regionId":"59"},{"regionId":"76"},{"regionId":"72"},{"regionId":"74"},{"regionId":"29"},{"regionId":"27"},{"regionId":"33"},{"regionId":"73"},{"regionId":"31"},{"regionId":"23"},{"regionId":"93"},{"regionId":"66"},{"regionId":"63"},{"regionId":"2"},{"regionId":"34"},{"regionId":"61"},{"regionId":"47"},{"regionId":"44"},{"regionId":"21"},{"regionId":"69"},{"regionId":"58"},{"regionId":"56"},{"regionId":"57"},{"regionId":"71"},{"regionId":"67"},{"regionId":"46"},{"regionId":"48"},{"regionId":"62"},{"regionId":"32"},{"regionId":"36"},{"regionId":"39"},{"regionId":"30"},{"regionId":"114160"},{"regionId":"14"},{"regionId":"16"},{"regionId":"142982"},{"regionId":"182028"},{"regionId":"18"},{"regionId":"26"},{"regionId":"35"},{"regionId":"43"},{"regionId":"51"},{"regionId":"53"},{"regionId":"60"},{"regionId":"64"},{"regionId":"75"},{"regionId":"86"},{"regionId":"89"},{"regionId":"68"},{"regionId":"124"},{"regionId":"155"},{"regionId":"142"},{"regionId":"138"},{"regionId":"170"},{"regionId":"166"},{"regionId":"154"}]},
	{"UserID":133543648,"action":"ncc.projectId.access","params":[{"projectId":"60"},{"projectId":"10"},{"projectId":"4"},{"projectId":"8"},{"projectId":"11"},{"projectId":"7"},{"projectId":"49"},{"projectId":"50"},{"projectId":"48"},{"projectId":"12"},{"projectId":"2"},{"projectId":"1"},{"projectId":"9"},{"projectId":"28"},{"projectId":"3"},{"projectId":"6"},{"projectId":"5"},{"projectId":0},{"projectId":"1"}]},
	{"UserID":133543648,"action":"ncc.template.access","params":[{"template":1},{"template":2},{"template":3},{"template":4},{"template":5},{"template":6},{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null}]},
	{"UserID":133543648,"action":"ncc.custom_field.access","params":[{"name":"lead"},{"name":"subheader"},{"name":"slug"},{"name":"htmlButton"},{"name":"imagesAuthor"},{"name":"widget-logotype-button"},{"name":"feeds"},{"name":"flags[tomain]"},{"name":"flags[fixonmain]"},{"name":"flags[totop]"},{"name":"flags[tofixedtop]"},{"name":"flags[torss]"},{"name":"flags[yarabota]"},{"name":"flags[toxml]"},{"name":"flags[tovip]"},{"name":"flags[toslider]"},{"name":"flags[goodNews]"},{"name":"flags[twitter]"},{"name":"flags[details]"},{"name":"flags[comPlace3]"},{"name":"flags[tospecialprojectId]"},{"name":"flags[n1spam]"},{"name":"flags[comPlace7]"},{"name":"flags[comPlace5]"},{"name":"flags[comPlace9]"},{"name":"flags[photorep]"},{"name":"flags[peerstv]"},{"name":"flags[stickOnMobile]"},{"name":"flags[mainnews]"},{"name":"flags[newsline]"},{"name":"flags[fixedinline1]"},{"name":"flags[fixedinline2]"},{"name":"flags[fixedinline3]"},{"name":"flags[mainblock1]"},{"name":"flags[mainblock2]"},{"name":"flags[mainblock4]"},{"name":"flags[themeoftheday1]"},{"name":"flags[themeoftheday2]"},{"name":"flags[themeoftheday3]"},{"name":"flags[everlastingnews]"},{"name":"flags[toBusinessSpecialprojectId]"},{"name":"isBaa"},{"name":"type"},{"name":"mainPhoto"},{"name":"socialBackgroundImage"},{"name":"socialBackgroundImageHeader"},{"name":"mainVideo"},{"name":"images"},{"name":"videos"},{"name":"files"},{"name":"sourceName"},{"name":"ratio"},{"name":"author"},{"name":"category"},{"name":"section"},{"name":"theme"},{"name":"rubrics"},{"name":"themes"},{"name":"h1"},{"name":"keywords"},{"name":"headerKeywords"},{"name":"polls"},{"name":"links"},{"name":"authors"},{"name":"goodNewsText"},{"name":"isCommentsAllowed"},{"name":"tags"},{"name":"commercialLabel"},{"name":"isProofread"},{"name":"updatesStatus"},{"name":"customUrl"},{"name":"copyright"},{"name":"scripts"},{"name":"crmOrder"},{"name":"isCriminal"},{"name":"socialAlign"},{"name":"formats"}]},
	{"UserID":133543648,"action":"ncc.regionId.update.access","params":[[]]},
	{"UserID":133543648,"action":"ncc.commercial.access","params":[{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null},{"isCommercial":true,"regionId":123},{"isCommercial":false,"regionId":123}]},
	{"UserID":133543648,"action":"ncc.records.texttab.update.access","params":[{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null}]},
	{"UserID":133543648,"action":"ncc.records.publish.access","params":[{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null}]},
	{"UserID":133543648,"action":"ncc.records.delete.access","params":[{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null}]},
	{"UserID":133543648,"action":"ncc.recordsoftheday.delete.access","params":[{"updatedAt":"2017-11-27T15:20:11+07:00","createdAt":"2017-11-27T14:37:19+07:00","creator":218141733,"moderator":206725203,"header":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","subheader":"","lead":"","text":"","template":1,"slug":"traslyatsiya","isCommentsAllowed":true,"isCommercial":false,"isValidated":false,"publishAt":"2017-11-27T14:36:30+07:00","id":51535473,"updatesStatus":"started","imagesOrder":[],"projectIds":["1"],"regionIds":["54","55"],"uploadPath":"8260867321511768184","projectId":"1","type":"news","regionId":"54","category":"24","formats":["undefined"],"headerText":"\u0422\u0440\u0430\u0441\u043b\u044f\u0446\u0438\u044f","authors":[],"socialAlign":"none","socialShare":{"1":{"54":"\/news\/social\/4cabaedf1a178edd729daa42b75662.jpg","55":"\/news\/social\/6d3f2e50fef7fcf780ec24a41eb162.jpg"}},"minPublishAt":"2017-11-27T14:36:30+07:00","scripts":[],"viewsCount":0,"views":null,"commentsCount":null}]}]
*/
